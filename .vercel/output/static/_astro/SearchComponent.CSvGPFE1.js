import{j as s}from"./jsx-runtime.BqEXxvvU.js";import{r}from"./index.DHQ29l5n.js";import{p as g,i as b}from"./categories.CN_oQO_X.js";import"./pocketbase.es.awTBJJAN.js";const j=()=>{const[u,d]=r.useState(""),[n,l]=r.useState([]),[m,o]=r.useState(!1),a=r.useRef(null);r.useEffect(()=>{const t=e=>{a.current&&!a.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]);const f=t=>{const e=t.target.value;if(d(e),e.length>0){const x=g.filter(p=>p.nombre.toLowerCase().includes(e.toLowerCase()));l(x),o(!0)}else l([]),o(!1)},c=t=>{for(const e of b)if(e.productos&&e.productos.includes(t))return e;return null},h=t=>{const e=c(t);return e?e.nombre.toUpperCase():"UNCATEGORIZED"},i=t=>{const e=c(t.id);e&&(window.location.href=e.nombre.toUpperCase())};return s.jsxs("div",{ref:a,className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Search...",value:u,onChange:f,className:"px-3 py-2 max-w-32 sm:max-w-60 rounded-full text-black focus:outline-none transition-all",onFocus:()=>o(!0),"aria-label":"Search products"}),m&&n.length>0&&s.jsx("div",{className:"absolute bg-white text-black mt-2 rounded-md shadow-lg w-full max-h-64 overflow-y-auto z-50",role:"listbox","aria-label":"Search results",children:n.map(t=>s.jsxs("div",{className:"p-2 hover:bg-gray-100 cursor-pointer flex items-center",onClick:()=>i(t),role:"option",tabIndex:0,onKeyPress:e=>{(e.key==="Enter"||e.key===" ")&&i(t)},children:[s.jsx("img",{src:t.fotoUrl,alt:"",className:"h-10 w-10 object-cover mr-2"}),s.jsxs("div",{children:[s.jsx("div",{children:t.nombre}),s.jsx("div",{className:"text-xs text-gray-500",children:h(t.id)})]})]},t.id))})]})};export{j as default};
