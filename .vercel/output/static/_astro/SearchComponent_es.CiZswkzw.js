import{j as t}from"./jsx-runtime.BqEXxvvU.js";import{r}from"./index.DHQ29l5n.js";import{p as g,i as b}from"./categories_es.Cx8o0Ohf.js";import"./pocketbase.es.awTBJJAN.js";const j=()=>{const[u,d]=r.useState(""),[n,l]=r.useState([]),[m,o]=r.useState(!1),a=r.useRef(null);r.useEffect(()=>{const s=e=>{a.current&&!a.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]);const f=s=>{const e=s.target.value;if(d(e),e.length>0){const x=g.filter(p=>p.nombre.toLowerCase().includes(e.toLowerCase()));l(x),o(!0)}else l([]),o(!1)},c=s=>{for(const e of b)if(e.productos&&e.productos.includes(s))return e;return null},h=s=>{const e=c(s);return e?e.nombre.toUpperCase():"UNCATEGORIZED"},i=s=>{const e=c(s.id);e&&(window.location.href=e.nombre.toUpperCase())};return t.jsxs("div",{ref:a,className:"relative",children:[t.jsx("input",{type:"text",placeholder:"Buscar...",value:u,onChange:f,className:"px-3 py-2 max-w-32 sm:max-w-60 rounded-full text-black focus:outline-none transition-all",onFocus:()=>o(!0),"aria-label":"Buscar productos"}),m&&n.length>0&&t.jsx("div",{className:"absolute bg-white text-black mt-2 rounded-md shadow-lg w-full max-h-64 overflow-y-auto z-50",role:"listbox","aria-label":"Buscar resultados",children:n.map(s=>t.jsxs("div",{className:"p-2 hover:bg-gray-100 cursor-pointer flex items-center",onClick:()=>i(s),role:"option",tabIndex:0,onKeyPress:e=>{(e.key==="Enter"||e.key===" ")&&i(s)},children:[t.jsx("img",{src:s.fotoUrl,alt:"",className:"h-10 w-10 object-cover mr-2"}),t.jsxs("div",{children:[t.jsx("div",{children:s.nombre}),t.jsx("div",{className:"text-xs text-gray-500",children:h(s.id)})]})]},s.id))})]})};export{j as default};
